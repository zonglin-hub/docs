# cd_切换用户当前工作目录

## 主要用途

- 切换工作目录至 dir。其中 dir 的表示法可以是绝对路径或相对路径。
- 若参数 dir 省略，则默认为使用者的 shell 变量 HOME。
- 如果 dir 指定为 "~" 时表示为使用者的 shell 变量 HOME，"." 表示当前目录，".." 表示当前目录的上一级目录。
- 环境变量 CDPATH 是由冒号分割的一到多个目录，你可以将常去的目录的上一级加入到 CDPATH 以便方便访问它们；
  如果 dir 以 "/" 开头那么 CDPATH 不会被使用。
- 当 "shopt" 选项 "cdable_vars" 打开时，如果 dir 在 CDPATH 及当前目录下均不存在，
  那么会把它当作变量，读取它的值作为要进入的目录。

> [!NOTE] 注意
> 1. 该命令是 bash 内建命令，相关的帮助信息请查看 help 命令。
> 2. 建议您在编写脚本的过程中如有必要使用 cd 命令时，请增加必要的注释以用于提醒阅读者当前工作目录，以免出现诸如找不到文件这类问题的发生。

目录

- [cd\_切换用户当前工作目录](#cd_切换用户当前工作目录)
  - [主要用途](#主要用途)
  - [选项](#选项)
  - [例子](#例子)


## 选项

<pre>
❯ cd --help
cd: cd [-L|[-P [-e]] [-@]] [目录]
    改变 shell 工作目录。

    改变当前目录至 <目录>。默认的 <目录> 是 shell 变量 HOME 的值。

    变量 CDPATH 定义了搜索含有 <目录> 的目录的搜索路径。CDPATH 中额外的
    目录名称以冒号 (:) 隔开。空的 CDPATH 表示当前目录。如果 <目录> 以
    斜杠 (/) 开头，则不会使用 CDPATH。

    如果找不到目录，并且 shell 选项 "cdable_vars" 被设定，则假定参数是一个
    变量名。如果该变量有值，则它的值被当作 <目录>。

    选项：
      -L        强制跟随符号链接: 在处理 ".." 之后解析 <目录> 中的符号链接
      -P        使用物理目录结构而不跟随符号链接: 在处理 ".." 之前
                解析 <目录> 中的符号链接
      -e        如果使用了 -P 选项，但无法成功确定当前工作目录时，以非零状态退出
      -@        在支持扩展属性的系统上，将一个具有扩展属性的文件当作
                含有文件属性的目录。

    默认情况下，跟随符号链接，正如指定了 "-L" 一样。
    ".." 的处理方式是，移除路径名中的上一个组成部分，以 <目录> 的开头
    或者斜杠为界限。

    退出状态：
    如果目录改变，或在使用 -P 选项时 $PWD 修改成功，则返回 0；否则返回非零。

</pre>

## 例子

```shell
cd    # 进入用户主目录；
cd /  # 进入根目录
cd ~  # 进入用户主目录；
cd ..  # 返回上级目录（若当前目录为“/“，则执行完后还在“/"；".."为上级目录的意思）；
cd ../..  # 返回上两级目录；
cd !$  # 把上个命令的参数作为cd参数使用。
```

关于切换到上一个工作目录的说明

```shell
cd -
# 命令会首先显示要切换到的目标目录，然后再进入。
cd ${OLDPWD}
# 命令会直接切换到上一个工作目录。
```

关于 CDPATH

```shell
# 设置桌面文件夹作为CDPATH的值。
CDPATH='~/Desktop'
# 假设我们接下来要演示涉及到的路径~和~/Desktop下没有test3文件夹，现在新建它们。
mkdir ~/test3
mkdir ~/Desktop/test3
# 进入~目录。
cd ~
# 进入test3目录。
cd test3
# 执行后显示~/Desktop/test3并进入该目录，而不是~目录的test3目录。
# 如果CDPATH存在值，那么优先在CDPATH中查找并进入第一个匹配成功的，如果全部失败那么最后尝试当前目录。
```

关于选项 "cdable_vars"

```shell
# 打开选项。
shopt -s cdable_vars
# 假设当前路径以及CDPATH没有名为new_var的目录。
new_var='~/Desktop'
# 尝试进入。
cd new_var
# 关闭选项。
shopt -u cdable_vars
```
